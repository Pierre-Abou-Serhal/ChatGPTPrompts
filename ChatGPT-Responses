using System.IO.Compression;
using Microsoft.AspNetCore.Mvc;

[HttpGet("download-multiple-files")]
public IActionResult DownloadMultipleFiles()
{
    var files = new List<(byte[], string)>
    {
        (System.IO.File.ReadAllBytes("path/to/firstFile.pdf"), "FirstFile.pdf"),
        (System.IO.File.ReadAllBytes("path/to/secondFile.docx"), "SecondFile.docx")
    };

    using (var memoryStream = new MemoryStream())
    {
        using (var archive = new ZipArchive(memoryStream, ZipArchiveMode.Create, true))
        {
            foreach (var (fileBytes, fileName) in files)
            {
                var entry = archive.CreateEntry(fileName, CompressionLevel.Fastest);
                using (var entryStream = entry.Open())
                {
                    entryStream.Write(fileBytes, 0, fileBytes.Length);
                }
            }
        }

        return File(memoryStream.ToArray(), "application/zip", "attachments.zip");
    }
}
