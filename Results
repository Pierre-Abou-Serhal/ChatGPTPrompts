export interface DuplicateAccNbr {
  accNbr: string;
  count: number; // total occurrences (e.g., 3 means it appears 3 times)
}

export function getDuplicatedAccNbrsWithCounts(
  items: FileImportContent[]
): DuplicateAccNbr[] {
  const counts = new Map<string, number>();

  for (const item of items) {
    const acc = item.accNbr?.trim();
    if (!acc) continue;
    counts.set(acc, (counts.get(acc) ?? 0) + 1);
  }

  const duplicates: DuplicateAccNbr[] = [];
  for (const [accNbr, count] of counts) {
    if (count > 1) duplicates.push({ accNbr, count });
  }

  // Optional: sort by most frequent first
  duplicates.sort((a, b) => b.count - a.count || a.accNbr.localeCompare(b.accNbr));

  return duplicates;
}
