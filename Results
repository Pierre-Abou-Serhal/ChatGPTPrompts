/**
 * Copyright Mastercard Aï¿½ 2025
 * Fri Jul 25 2025 17:03:24 GMT+1000 (Australian Eastern Standard Time)
 * THREEDS V1.3.0
 * 746ed0860399ce33150779e653d3a81caaba4d04
 */

!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t,n){var r,o,i,s,a,c,u,d;Object.defineProperty(t,"__esModule",{value:!0}),t.POI_API_VERSION=t.VISA_ALIASES=t.SCHEMES=t.CryptogramFormatEnum=t.WalletProviderEnum=t.FundsEnum=t.AllowedMethodsEnum=t.ApiOperationsEnum=void 0,function(e){e.INITIATE_BROWSER_PAYMENT="INITIATE_BROWSER_PAYMENT",e.RETRIEVE_TRANSACTION="RETRIEVE_TRANSACTION",e.PAYMENT_OPTIONS_INQUIRY="PAYMENT_OPTIONS_INQUIRY",e.INITIATE_AUTHENTICATION="INITIATE_AUTHENTICATION",e.AUTHENTICATE_PAYER="AUTHENTICATE_PAYER",e.UPDATE_BROWSER_PAYMENT="UPDATE_BROWSER_PAYMENT",e.CONFIRM_BROWSER_PAYMENT="CONFIRM_BROWSER_PAYMENT",e.CREATE_SRC_ENROLLMENT_CARD_OBJECT="CREATE_SRC_ENROLLMENT_CARD_OBJECT",e.RETRIEVE_BRANDING_ASSETS="RETRIEVE_BRANDING_ASSETS"}(r||(t.ApiOperationsEnum=r={})),function(e){e.GET="GET",e.POST="POST",e.PUT="PUT"}(o||(t.AllowedMethodsEnum=o={})),function(e){e.ALIPAY="ALIPAY",e.BOLETO_BANCARIO="BOLETO_BANCARIO",e.BANCONTACT="BANCONTACT",e.ENETS="ENETS",e.GIROPAY="GIROPAY",e.GRABPAY="GRABPAY",e.IDEAL="IDEAL",e.KLARNA="KLARNA",e.MULTIBANCO="MULTIBANCO",e.OXXO="OXXO",e.PAYPAL="PAYPAL",e.OPEN_BANKING_BANK_TRANSFER="OPEN_BANKING_BANK_TRANSFER",e.POLI="POLI",e.SEPA="SEPA",e.SOFORT="SOFORT",e.UNION_PAY="UNION_PAY",e.WECHAT_PAY="WECHAT_PAY"}(i||(t.FundsEnum=i={})),function(e){e.AMEX_EXPRESS_CHECKOUT="AMEX_EXPRESS_CHECKOUT",e.ANDROID_PAY="ANDROID_PAY",e.APPLE_PAY="APPLE_PAY",e.CHASE_PAY="CHASE_PAY",e.GOOGLE_PAY="GOOGLE_PAY",e.MASTERPASS_ONLINE="MASTERPASS_ONLINE",e.SAMSUNG_PAY="SAMSUNG_PAY",e.VISA_CHECKOUT="VISA_CHECKOUT"}(s||(t.WalletProviderEnum=s={})),function(e){e.THREEDSECURE="3DSECURE",e.EMV="EMV"}(a||(t.CryptogramFormatEnum=a={})),function(e){e.MASTERCARD="mastercard",e.VISA="visa",e.AMEX="amex"}(c||(t.SCHEMES=c={})),function(e){e.sandbox="visasrcsandbox",e.mtf="visasrcmtf",e.production="visasrcprod"}(u||(t.VISA_ALIASES=u={})),function(e){e[e.apiVersion=70]="apiVersion"}(d||(t.POI_API_VERSION=d={}))},function(e,t,n){"undefined"==typeof Promise&&(Promise=n(9).default),void 0===Promise.prototype.finally&&(Promise.prototype.finally=function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))})},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.CorsService=void 0;var r=n(8),o=n(13),i=n(14),s=n(16),a=n(0),c=n(17);n(1);var u=function(){function e(){var e=this;this._errorFunction=function(){},this._successFunction=function(){},this._completeFunction=function(){},this._errorHandlerSet=!1,this._successHandlerSet=!1,this._completeHandlerSet=!1,this._middleWareSet=!1,this.httpRequestPromise=new Promise((function(e,t){})),this.httpRequestPromise.then((function(t){e._successFunction(t)})).catch((function(t){e._errorFunction(t)})).finally((function(){e._completeFunction()}))}return e.prototype.initiateSend=function(e){var t=this,n=new i.SendParameterModel(e),a=this.generateUrl(n),u=[];return n.isValid()||u.push("ERROR: sendParameter is not valid:"+n.getErrorMessage()),""===a&&u.push("ERROR: url is not valid"),u.length>0?this._errorHandlerSet?this._errorFunction(u.join("\n")):console.error(u.join("\n")):(this._requestObject=new r.RequestClass,this.httpRequestPromise=this._requestObject.sendRequest(new s.SendRequestModel({url:a,method:this.isPOIVersionAbove70(n)?"POST":c.apiMethod.get(n.getApiOperation()),header:new o.SendRequestHeaderModel(n),bodyData:n.getBodyData()})),this.httpRequestPromise.then((function(e){t._successFunction(e)}),(function(e){t._errorFunction(e)})).finally((function(){t._completeFunction()}))),this},e.prototype.isPOIVersionAbove70=function(e){return e.getApiOperation()==a.ApiOperationsEnum.PAYMENT_OPTIONS_INQUIRY&&parseInt(e.getApiVersion())>=a.POI_API_VERSION.apiVersion},e.prototype.generateUrl=function(e){var t,n,r,o,i;switch(e.getApiOperation()){case a.ApiOperationsEnum.PAYMENT_OPTIONS_INQUIRY:var s=e.getBodyData(),c=s?s.getParsed():{},u=null===(t=e.getXJsSdk())||void 0===t?void 0:t.includes("ClickToPay"),d=s&&(null===(n=null==c?void 0:c.session)||void 0===n?void 0:n.id)&&!u?"?session.id=".concat(c.session.id):"",p=null===(i=null===(o=null===(r=c.sourceOfFunds)||void 0===r?void 0:r.provided)||void 0===o?void 0:o.card)||void 0===i?void 0:i.prefix,l=p?"".concat(d?"&":"?","sourceOfFunds.provided.card.prefix=").concat(p):"",h="https://".concat(e.getApiHost(),"/api/rest/version/").concat(e.getApiVersion(),"/merchant/").concat(e.getMerchantId(),"/paymentOptionsInquiry");return this.isPOIVersionAbove70(e)?"".concat(h):"".concat(h).concat(d).concat(l);case a.ApiOperationsEnum.RETRIEVE_TRANSACTION:case a.ApiOperationsEnum.INITIATE_BROWSER_PAYMENT:case a.ApiOperationsEnum.AUTHENTICATE_PAYER:case a.ApiOperationsEnum.INITIATE_AUTHENTICATION:case a.ApiOperationsEnum.UPDATE_BROWSER_PAYMENT:case a.ApiOperationsEnum.CONFIRM_BROWSER_PAYMENT:return"https://".concat(e.getApiHost(),"/api/rest/version/").concat(e.getApiVersion(),"/merchant/").concat(e.getMerchantId(),"/order/").concat(encodeURIComponent(e.getOrderId()),"/transaction/").concat(encodeURIComponent(e.getTransactionId()));case a.ApiOperationsEnum.CREATE_SRC_ENROLLMENT_CARD_OBJECT:return"https://".concat(e.getApiHost(),"/api/rest/version/").concat(e.getApiVersion(),"/merchant/").concat(e.getMerchantId(),"/session/").concat(e.getSessionId());case a.ApiOperationsEnum.RETRIEVE_BRANDING_ASSETS:return"https://".concat(e.getApiHost(),"/asset/resourceText/").concat(e.getAssetId(),"?merchantId=").concat(e.getMerchantId());default:return""}},e.prototype.middleware=function(e){return!1!==e&&(this._middlewareConfig=e,this._middleWareSet=!0,this._requestObject.updateMiddleware(this._middlewareConfig)),this},e.prototype.onError=function(e){return this._errorFunction=e,this._errorHandlerSet=!0,this},e.prototype.onSuccess=function(e){return this._successFunction=e,this._successHandlerSet=!0,this},e.prototype.onComplete=function(e){return this._completeFunction=e,this._completeHandlerSet=!0,this},e}();t.CorsService=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Tools=void 0;var r=function(){function e(){}return e.keys=function(e){return Object.keys(e)},e.values=function(e){return Object.keys(e).map((function(t){return e[t]}))},e}();t.Tools=r},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};!function(e){var t=n(7).InitiateAuthentication,o=n(18).AuthenticatePayer,i=n(20).extractHost,s=["merchantId","sessionId","callback"],a=i("three-ds"),c={BEFORE_INITIATE_AUTHENTICATION:!1,AFTER_INITIATE_AUTHENTICATION:!1,BEFORE_AUTHENTICATE_PAYER:!1,AFTER_AUTHENTICATE_PAYER:!1},u={PROCEED_WITH_PAYMENT:E,PROCEED_WITH_AUTHENTICATION:E,PROCEED:E,DO_NOT_PROCEED:m,RESUBMIT_WITH_ALTERNATIVE_PAYMENT_DETAILS:m},d="ThreeDS: API has not been configured. Please call ThreeDS.configure() before accessing other methods.",p={};function l(){return p.configured}var h=function(e){return{error:{result:"ERROR",cause:"INVALID_REQUEST",explanation:e}}};function f(e,t){e.result?u[e.response.gatewayRecommendation](e,t):e.response&&e.response.error?p.callback({error:e.response.error}):p.callback({error:e.error})}function _(e){!function(e,t){var n;(n=I(e)).error?n.response&&n.response.error?p.callback({error:n.response.error}):p.callback({error:n.error}):(p.callback(n),p.fullScreenRedirect&&function(e){document.body.innerHTML=e;var t=document.body.getElementsByTagName("script")[0];if(void 0!==t){var n=document.getElementById("threedsChallengeRedirectForm")||document.getElementById("threedsFrictionLessRedirectForm")||document.getElementById("redirectTo3ds1Form");n&&(n.target="_parent");var r=document.createElement("script");r.innerText=t.innerText,document.body.appendChild(r);var o=document.getElementById("challengeFrame")||document.getElementById("redirectTo3ds1Frame");o&&(o.style.position="absolute",o.style.width="100%",o.style.height="100%")}}(n.htmlRedirectCode))}(e)}function E(e,t){var n=function(e){var t=(e&&e.data&&e.data.payload?e.data.payload:e).authentication.version,n=I(e);return n.authenticationVersion=t,n}(e),r=n.restApiResponse.authentication.version,o=n.restApiResponse.authentication.redirectHtml||n.restApiResponse.authentication.redirect.html;"3DS2"===r?function(e,t,r){var o=document.createElement("iframe");o.style.display="none",o.id="iframe",document.body.appendChild(o),o.contentWindow.name="methodIFrame";var i=document.getElementById("iframe").contentWindow.document;i.open(),i.write(e),i.close(),p.callback(n)}(o):p.callback(n)}function m(e,t){p.callback(I(e))}function A(e,t,n){var o={merchantId:p.merchantId,correlationId:p.correlationId,wsVersion:p.wsVersion,version:p.wsVersion,apiHost:a,sessionId:p.sessionId,orderId:e,transactionId:t,xJsSdk:"ThreeDS:1.3.0"};return r({},o,n=n||null)}function g(e){return e.authentication.redirectHtml||e.authentication.redirect.html}function I(e){var t=e&&e.data&&e.data.payload?e.data.payload:e;return t.result?{restApiResponse:t,correlationId:t.correlationId,gatewayRecommendation:t.response.gatewayRecommendation,htmlRedirectCode:g(t)}:{error:t.error?t.error:t.response&&t.response.error?t.response.error:t}}window.ThreeDS={configure:function(e){try{!function(e){(function(e){for(var t=0;t<s.length;t++){var n=s[t];if(!e[n])throw h("ThreeDS: "+n+" missing.");p[n]=e[n]}var r,o;p.wsVersion=e.configuration.wsVersion,p.userLanguage=e.configuration.userLanguage?e.configuration.userLanguage:"en-US",function(e){if(t=e,n=Number(t),!(t&&!1===Number.isNaN(n)&&n>=54))throw h("ThreeDS: API version must be >=54");var t,n;p.wsVersion=e}(p.wsVersion),p.correlationId=(r=("3ds"+-[1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(){return(0|16*Math.random()).toString(16)})),null==(o=p.correlationId)||!0===Number.isNaN(o)?r:o),p.callback=e.callback,p.configured=!0,p.threeDsAuthId="three",p.containerId=e.containerId?e.containerId:"3DSUI"})(e),function(){if(!l())throw h("Error configuring ThreeDS API");p.callback()}()}(e)}catch(e){return!1}},isConfigured:function(){return p.configured},onEvent:function(e,t){if(!e||void 0===c[e])throw new Error('failed to subscribe to onEvent with the event: "'+e+'"');c[e]=t},initiateAuthentication:function(e,n,r,o){if(c.BEFORE_INITIATE_AUTHENTICATION&&c.BEFORE_INITIATE_AUTHENTICATION({orderId:e,transactionId:n}),!l())throw h(d);p.callback=r,p.orderId=e,p.transactionId=n,new t(A(e,n,o)).onError((function(e){return f(e,p.callback)})).onSuccess((function(e){return f(e,p.callback)})).onComplete((function(e){c.AFTER_INITIATE_AUTHENTICATION&&c.AFTER_INITIATE_AUTHENTICATION(e)}))},authenticatePayer:function(e,t,n,r){if(c.BEFORE_AUTHENTICATE_PAYER&&c.BEFORE_AUTHENTICATE_PAYER({orderId:e,transactionId:t,optionalParams:r}),!l())throw h(d);p.callback=n,p.orderId=e,p.transactionId=t,r&&r.fullScreenRedirect&&(p.fullScreenRedirect=r.fullScreenRedirect),new o(A(e,t,r)).onError((function(e){return _(e,p.callback)})).onSuccess((function(e){return _(e,p.callback)})).onComplete((function(e){c.AFTER_AUTHENTICATE_PAYER&&c.AFTER_AUTHENTICATE_PAYER(e)}))},getLastCorrelationId:function(){return p.correlationId}}}(window)},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.InitiateAuthentication=void 0;var s=n(0),a=function(e){function t(t){var n=e.call(this)||this;return t&&n.send(t),n}return o(t,e),t.prototype.send=function(t){var n={apiOperation:s.ApiOperationsEnum.INITIATE_AUTHENTICATION};return e.prototype.initiateSend.call(this,i(i({},t),n)),this},t}(n(2).CorsService);t.InitiateAuthentication=a},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.RequestClass=void 0;var r=n(3);n(1);var o=function(){function e(){}return e.prototype.sendRequest=function(t){var n=this;return new Promise((function(r,o){var i=new XMLHttpRequest,s=t.getBodyData(),a=t.getHeader(),c=t.getMethod(),u=t.getUrl();i.open(c,u),a&&e.provisionHeaderAttributes(a,i),i.onload=function(){i.status>=200&&i.status<300?n.resolveResponse(i.response,r):n.rejectResponse(i,o)},i.onerror=function(){n.rejectResponse(i,o)},s&&s.getParsed()?i.send(JSON.stringify(s.getParsed())):i.send()}))},e.prototype.updateMiddleware=function(e){this._middleware=e},e.prototype.resolveResponse=function(e,t){var n=this;try{var r=JSON.parse(e),o="",i=function(e,t){e[t[0]]&&t.forEach((function(r,s){var a=r;if(a.indexOf("[n]")>-1)a=a.replace("[n]",""),t.length>s+1?e[a]&&e[a].forEach((function(e){o="",i(e,t.slice(s+1))})):e&&e[a]&&(c=n._middleware.pipe(e[a]))&&(e[a]=c);else if(""===o){var c;s===t.length-1?(o=e[a],(c=n._middleware.pipe(o))&&(e[a]=c)):e=e[a]}}))};this._middleware&&this._middleware.targetObject&&i(r,this._middleware.targetObject.split(".")),t(r)}catch(n){t(e)}},e.prototype.rejectResponse=function(e,t){var n={};try{n={status:e.statusText,response:JSON.parse(e.response)}}catch(t){n={status:e.statusText,response:e.response}}console.error(n),t(n)},e.provisionHeaderAttributes=function(e,t){for(var n=0,o=e.convertToKeyValueCollection();n<o.length;n++){var i=o[n];t.setRequestHeader(r.Tools.keys(i).toString(),r.Tools.values(i).toString())}return t},e}();t.RequestClass=o},function(e,t,n){n.r(t),function(e){var r=n(5),o=setTimeout;function i(){}function s(e){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],l(e,this)}function a(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,s._immediateFn((function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void u(t.promise,e)}c(t.promise,r)}else(1===e._state?c:u)(t.promise,e._value)}))):e._deferreds.push(t)}function c(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof s)return e._state=3,e._value=t,void d(e);if("function"==typeof n)return void l((r=n,o=t,function(){r.apply(o,arguments)}),e)}e._state=1,e._value=t,d(e)}catch(t){u(e,t)}var r,o}function u(e,t){e._state=2,e._value=t,d(e)}function d(e){2===e._state&&0===e._deferreds.length&&s._immediateFn((function(){e._handled||s._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)a(e,e._deferreds[t]);e._deferreds=null}function p(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function l(e,t){var n=!1;try{e((function(e){n||(n=!0,c(t,e))}),(function(e){n||(n=!0,u(t,e))}))}catch(e){if(n)return;n=!0,u(t,e)}}s.prototype.catch=function(e){return this.then(null,e)},s.prototype.then=function(e,t){var n=new this.constructor(i);return a(this,new p(e,t,n)),n},s.prototype.finally=r.a,s.all=function(e){return new s((function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);var o=r.length;function i(e,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(t){i(e,t)}),n)}r[e]=s,0==--o&&t(r)}catch(e){n(e)}}for(var s=0;s<r.length;s++)i(s,r[s])}))},s.resolve=function(e){return e&&"object"==typeof e&&e.constructor===s?e:new s((function(t){t(e)}))},s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,n){for(var r=0,o=e.length;r<o;r++)e[r].then(t,n)}))},s._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){o(e,0)},s._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.default=s}.call(this,n(10).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(11),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(4))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,o,i,s,a,c=1,u={},d=!1,p=e.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(e);l=l&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",a=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&f(+t.data.slice(s.length))},e.addEventListener?e.addEventListener("message",a,!1):e.attachEvent("onmessage",a),r=function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},r=function(e){i.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(o=p.documentElement,r=function(e){var t=p.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(f,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,r(c),c++},l.clearImmediate=h}function h(e){delete u[e]}function f(e){if(d)setTimeout(f,0,e);else{var t=u[e];if(t){d=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{h(e),d=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(4),n(12))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],d=!1,p=-1;function l(){d&&c&&(d=!1,c.length?u=c.concat(u):p=-1,u.length&&h())}function h(){if(!d){var e=a(l);d=!0;for(var t=u.length;t;){for(c=u,u=[];++p<t;)c&&c[p].run();p=-1,t=u.length}c=null,d=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function _(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||d||a(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=_,o.addListener=_,o.once=_,o.off=_,o.removeListener=_,o.removeAllListeners=_,o.emit=_,o.prependListener=_,o.prependOnceListener=_,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SendRequestHeaderModel=void 0;var r=n(3),o=n(0),i=function(){function e(e){this._ContentType="application/json",this._Authorization="Basic "+btoa("merchant."+e.getMerchantId()+":"+e.getSessionId()),this._xJsSdk=e.getXJsSdk(),e.getApiOperation()===o.ApiOperationsEnum.RETRIEVE_BRANDING_ASSETS&&(this._AcceptLanguage=e.getLocale())}return e.prototype.getAuthorization=function(){return{Authorization:this._Authorization}},e.prototype.getContentType=function(){return{"Content-Type":this._ContentType}},e.prototype.getXJsSdk=function(){return{"x-js-sdk":this._xJsSdk}},e.prototype.getAcceptLanguage=function(){return{"Accept-Language":this._AcceptLanguage}},e.prototype.convertToKeyValueCollection=function(){return[this.getAuthorization(),this.getContentType(),this.getXJsSdk(),this.getAcceptLanguage()].filter((function(e){return""!==r.Tools.values(e).toString()}))},e}();t.SendRequestHeaderModel=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SendParameterModel=void 0;var r=n(15),o=n(0),i=function(){function e(e){var t=e,n=e,o=e,i=e,s=e;t.session&&t.session.id?this._sessionId=t.session.id:t.sessionId&&(this._sessionId=t.sessionId),t.apiOperation&&(this._apiOperation=t.apiOperation),t.apiHost&&(this._apiHost=t.apiHost.replace(/(^\w+:|^)\/\//,"")),t.version&&(this._apiVersion=t.version),n.merchantId&&(this._merchantId=n.merchantId),n.orderId&&(this._orderId=n.orderId),n.transactionId&&(this._transactionId=n.transactionId),i.assetId&&(this._assetId=i.assetId),s.locale&&(this._locale=s.locale),o.xJsSdk&&(this._xJsSdk=o.xJsSdk),this._bodyData=new r.SendRequestBodyModel(n)}return e.prototype.hasApiOperation=function(){return!!this._apiOperation},e.prototype.hasTransactionId=function(){return!!this._transactionId},e.prototype.hasMerchantId=function(){return!!this._merchantId},e.prototype.hasSessionId=function(){return!!this._sessionId},e.prototype.hasOrderId=function(){return!!this._orderId},e.prototype.hasApiHost=function(){return!!this._apiHost},e.prototype.hasAssetId=function(){return!!this._assetId},e.prototype.getApiOperation=function(){return this._apiOperation},e.prototype.getMerchantId=function(){return this._merchantId},e.prototype.getSessionId=function(){return this._sessionId},e.prototype.getOrderId=function(){return this._orderId},e.prototype.getTransactionId=function(){return this._transactionId},e.prototype.getBodyData=function(){return this._bodyData},e.prototype.getApiHost=function(){return this._apiHost},e.prototype.getApiVersion=function(){return this._apiVersion},e.prototype.getXJsSdk=function(){return this._xJsSdk},e.prototype.getCardPrefix=function(){return this._cardPrefix},e.prototype.getErrorMessage=function(){return this._errorMessage.join("<br>")},e.prototype.getAssetId=function(){return this._assetId},e.prototype.getLocale=function(){return this._locale},e.prototype.isValid=function(){switch(this._errorMessage=[],this.hasApiOperation()||this._errorMessage.push("Missing Api Operation: apiOperation"),this._apiOperation!==o.ApiOperationsEnum.RETRIEVE_BRANDING_ASSETS&&(this.hasMerchantId()||this._errorMessage.push("Missing Merchant ID: merchantId"),this.hasSessionId()||this._errorMessage.push("Missing Session ID: sessionId")),this.hasApiHost()||this._errorMessage.push("Missing Api Host: apiHost"),this._apiOperation){case o.ApiOperationsEnum.INITIATE_BROWSER_PAYMENT:case o.ApiOperationsEnum.RETRIEVE_TRANSACTION:case o.ApiOperationsEnum.UPDATE_BROWSER_PAYMENT:case o.ApiOperationsEnum.CONFIRM_BROWSER_PAYMENT:this.hasOrderId()||this._errorMessage.push("Missing Order ID: orderId"),this.hasTransactionId()||this._errorMessage.push("Missing Transaction ID: transactionId");break;case o.ApiOperationsEnum.RETRIEVE_BRANDING_ASSETS:this.hasAssetId()||this._errorMessage.push("Missing Asset ID: assetId")}return 0==this._errorMessage.length},e}();t.SendParameterModel=i},function(e,t,n){var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SendRequestBodyModel=void 0;var o=n(0),i=function(){function e(e){var t;this._correlationId={correlationId:""},this._merchant={merchant:""},this._transaction={transaction:{id:"",acquirer:{customData:""}}},this._agreement={agreement:{}},this._customer={customer:{}},this._billing={billing:{}},this._shipping={shipping:{}},this._sourceOfFunds={sourceOfFunds:{}},this._browserPayment={browserPayment:{}},this._session={id:"",version:null},this._order={order:{}},this._locale={locale:""},this._authentication={authentication:{}},this._parsedBodyDataMap=new Map,this._device={device:{browser:this.getDeviceBrowser(),fingerprint:"",hostname:"",ipAddress:null,mobilePhoneModel:"",browserDetails:{screenHeight:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,screenWidth:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,language:(t=navigator.language,(null!=t&&t.length>8?t.substring(0,t.indexOf("-")):t)||"en-US"),colorDepth:screen.colorDepth,javaEnabled:String(navigator.javaEnabled()),timeZone:(new Date).getTimezoneOffset(),acceptHeaders:"application/json","3DSecureChallengeWindowSize":"FULL_SCREEN"}}},e.apiOperation&&(this._apiOperation=e.apiOperation),e.correlationId&&(this._correlationId={correlationId:e.correlationId}),e.customer&&(this._customer={customer:e.customer}),e.sourceOfFunds&&(this._sourceOfFunds={sourceOfFunds:e.sourceOfFunds}),e.session&&e.session.id?this._session.id=e.session.id:e.sessionId&&(this._session.id=e.sessionId),e.session&&e.session.version&&(this._session.version=e.session.version),e.device&&(e.device.ipAddress&&(this._device.device.ipAddress=e.device.ipAddress),e.device.fingerprint&&(this._device.device.fingerprint=e.device.fingerprint),e.device.hostname&&(this._device.device.hostname=e.device.hostname),e.device.mobilePhoneModel&&(this._device.device.mobilePhoneModel=e.device.mobilePhoneModel),e.device.browserDetails&&(this._device.device.browserDetails=r(r({},this._device.device.browserDetails),e.device.browserDetails))),e.billing&&(this._billing={billing:e.billing}),e.shipping&&(this._shipping={shipping:e.shipping}),e.browserPayment&&(this._browserPayment={browserPayment:e.browserPayment}),e.order&&(this._order={order:e.order}),e.locale&&(this._locale={locale:e.locale}),e.authentication&&(this._authentication={authentication:e.authentication}),e.version&&(this._version=e.version),e.merchant&&(this._merchant={merchant:e.merchant}),e.transaction&&(e.transaction.id||e.transaction.acquirer)&&(this._transaction={transaction:e.transaction}),e.gatewayEntryPoint&&(this._gatewayEntryPoint=e.gatewayEntryPoint),e.agreement&&(this._agreement={agreement:e.agreement}),this.setParsedBodyDataMap()}return e.prototype.getApiOperation=function(){return this._apiOperation},e.prototype.getCorrelationId=function(){return this._correlationId},e.prototype.getCustomer=function(){return this._customer},e.prototype.getMerchant=function(){return this._merchant},e.prototype.getTransaction=function(){return this._transaction},e.prototype.getAgreement=function(){return this._agreement},e.prototype.getGatewayEntryPoint=function(){return this._gatewayEntryPoint},e.prototype.getSourceOfFunds=function(){return this._sourceOfFunds},e.prototype.getBrowserPayment=function(){return this._browserPayment},e.prototype.getSession=function(){return this._session},e.prototype.getBilling=function(){return this._billing},e.prototype.getShipping=function(){return this._shipping},e.prototype.getOrder=function(){return this._order},e.prototype.getLocale=function(){return this._locale},e.prototype.getAuthentication=function(){return this._authentication},e.prototype.getDevice=function(){return this._device},e.prototype.getVersion=function(){return+this._version},e.prototype.setParsedBodyDataMap=function(){var e,t,n,i,s,a=this;if(this.getVersion()>=o.POI_API_VERSION.apiVersion){var c=null===(n=null===(t=null===(e=this.getSourceOfFunds().sourceOfFunds)||void 0===e?void 0:e.provided)||void 0===t?void 0:t.card)||void 0===n?void 0:n.prefix;this._parsedBodyDataMap.set(o.ApiOperationsEnum.PAYMENT_OPTIONS_INQUIRY,{session:this.getSession(),sourceOfFunds:{provided:{card:{prefix:c}}}})}else this._parsedBodyDataMap.set(o.ApiOperationsEnum.PAYMENT_OPTIONS_INQUIRY,{session:this.getSession(),device:this.getDevice().device,locale:this.getLocale().locale,correlationId:this.getCorrelationId().correlationId,sourceOfFunds:this.getSourceOfFunds().sourceOfFunds});this._parsedBodyDataMap.set(o.ApiOperationsEnum.INITIATE_AUTHENTICATION,{order:this.getOrder().order,merchant:this.getMerchant().merchant,transaction:this.getTransaction().transaction,correlationId:this.getCorrelationId().correlationId,sourceOfFunds:this.getSourceOfFunds().sourceOfFunds,apiOperation:this.getApiOperation(),session:this.getSession()}),this._parsedBodyDataMap.set(o.ApiOperationsEnum.AUTHENTICATE_PAYER,(delete(i=r({},a.getDevice().device)).hostname,delete i.mobilePhoneModel,delete i.fingerprint,{apiOperation:a.getApiOperation(),session:a.getSession(),correlationId:a.getCorrelationId().correlationId,order:a.getOrder().order,merchant:a.getMerchant().merchant,transaction:a.getTransaction().transaction,agreement:a.getAgreement().agreement,authentication:a.getAuthentication().authentication,sourceOfFunds:a.getSourceOfFunds().sourceOfFunds,device:i,billing:a.getBilling().billing})),this._parsedBodyDataMap.set(o.ApiOperationsEnum.INITIATE_BROWSER_PAYMENT,function(){var e=r({},a.getDevice().device);delete e.browserDetails;var t={apiOperation:a.getApiOperation(),correlationId:a.getCorrelationId().correlationId,customer:a.getCustomer().customer,billing:a.getBilling().billing,shipping:a.getShipping().shipping,order:a.getOrder().order,authentication:a.getAuthentication().authentication,gatewayEntryPoint:a.getGatewayEntryPoint(),merchant:a.getMerchant().merchant,transaction:a.getTransaction().transaction,agreement:a.getAgreement().agreement,sourceOfFunds:a.getSourceOfFunds().sourceOfFunds,browserPayment:a.getBrowserPayment().browserPayment,device:e,session:a.getSession()};return t.customer&&""===t.customer.email&&""===t.customer.phone&&""===t.customer.firstName&&""===t.customer.lastName&&delete t.customer,a.getVersion()<=51&&delete t.device,t}()),this._parsedBodyDataMap.set(o.ApiOperationsEnum.UPDATE_BROWSER_PAYMENT,{apiOperation:a.getApiOperation(),correlationId:a.getCorrelationId().correlationId,order:a.getOrder().order,authentication:a.getAuthentication().authentication,gatewayEntryPoint:a.getGatewayEntryPoint(),merchant:a.getMerchant().merchant,transaction:a.getTransaction().transaction,session:a.getSession()}),this._parsedBodyDataMap.set(o.ApiOperationsEnum.CONFIRM_BROWSER_PAYMENT,((s={apiOperation:a.getApiOperation(),correlationId:a.getCorrelationId().correlationId,customer:a.getCustomer().customer,shipping:a.getShipping().shipping,order:a.getOrder().order,authentication:a.getAuthentication().authentication,gatewayEntryPoint:a.getGatewayEntryPoint(),merchant:a.getMerchant().merchant,agreement:a.getAgreement().agreement,sourceOfFunds:a.getSourceOfFunds().sourceOfFunds,session:a.getSession()}).customer&&""===s.customer.email&&""===s.customer.phone&&""===s.customer.firstName&&""===s.customer.lastName&&delete s.customer,s)),this._parsedBodyDataMap.set(o.ApiOperationsEnum.CREATE_SRC_ENROLLMENT_CARD_OBJECT,{apiOperation:a.getApiOperation()})},e.prototype.getParsed=function(){return this.cleanEmptyObjects(this._parsedBodyDataMap.get(this.getApiOperation()))},e.prototype.getDeviceBrowser=function(){var e=navigator.userAgent;return null!=e?e.substring(0,255):""},e.prototype.cleanEmptyObjects=function(e){if(e){var t=function(e){var n={};return Object.keys(e).forEach((function(r){"ipAddress"===r||"timeZone"===r?n[r]=e[r]:e[r]&&("object"==typeof e[r]?Object.keys(e[r]).length>0&&(n[r]=t(e[r])):null!==e[r]&&(n[r]=e[r]))})),n};return t(e)}return{}},e}();t.SendRequestBodyModel=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.SendRequestModel=void 0;var r=function(){function e(e){var t=e.method,n=e.header,r=e.url,o=e.bodyData;this.setMethod(t),this.setHeader(n),this.setUrl(r),this.setBodyData(o)}return e.prototype.getMethod=function(){return this._method},e.prototype.setMethod=function(e){this._method=e},e.prototype.getHeader=function(){return this._header},e.prototype.setHeader=function(e){this._header=e},e.prototype.getUrl=function(){return this._url},e.prototype.setUrl=function(e){this._url=e},e.prototype.getBodyData=function(){return this._bodyData},e.prototype.setBodyData=function(e){this._bodyData=e},e}();t.SendRequestModel=r},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.apiMethod=void 0;var r=n(0);t.apiMethod=new Map,t.apiMethod.set(r.ApiOperationsEnum.RETRIEVE_TRANSACTION,r.AllowedMethodsEnum.GET),t.apiMethod.set(r.ApiOperationsEnum.PAYMENT_OPTIONS_INQUIRY,r.AllowedMethodsEnum.GET),t.apiMethod.set(r.ApiOperationsEnum.RETRIEVE_BRANDING_ASSETS,r.AllowedMethodsEnum.GET),t.apiMethod.set(r.ApiOperationsEnum.INITIATE_BROWSER_PAYMENT,r.AllowedMethodsEnum.PUT),t.apiMethod.set(r.ApiOperationsEnum.INITIATE_AUTHENTICATION,r.AllowedMethodsEnum.PUT),t.apiMethod.set(r.ApiOperationsEnum.AUTHENTICATE_PAYER,r.AllowedMethodsEnum.PUT),t.apiMethod.set(r.ApiOperationsEnum.UPDATE_BROWSER_PAYMENT,r.AllowedMethodsEnum.PUT),t.apiMethod.set(r.ApiOperationsEnum.CONFIRM_BROWSER_PAYMENT,r.AllowedMethodsEnum.PUT),t.apiMethod.set(r.ApiOperationsEnum.CREATE_SRC_ENROLLMENT_CARD_OBJECT,r.AllowedMethodsEnum.POST)},function(e,t,n){var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticatePayer=void 0;var s=n(0),a=n(2),c=n(19),u=function(e){function t(t){var n=e.call(this)||this;return t&&n.send(t),n}return o(t,e),t.prototype.send=function(t){var n,r=this,o={apiOperation:s.ApiOperationsEnum.AUTHENTICATE_PAYER};return t.device&&t.device.ipAddress&&(n=t.device.ipAddress,/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(n))?e.prototype.initiateSend.call(this,i(i({},t),o)):(0,c.getIpAddress)(t).then((function(n){t.device?t.device.ipAddress=n:t.device={ipAddress:n},e.prototype.initiateSend.call(r,i(i({},t),o))})),this},t}(a.CorsService);t.AuthenticatePayer=u},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getIpAddress=void 0,n(1),t.getIpAddress=function(e){var t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=/([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/,r=new XMLHttpRequest,o=function(e){var r=new t({iceServers:[]}),o=function(){};void 0!==r.createDataChannel?(r.createDataChannel(""),r.createOffer().then(r.setLocalDescription.bind(r),o),r.onicecandidate=function(t){if(t&&t.candidate&&t.candidate.candidate){var i=n.exec(t.candidate.candidate);i&&i[1]?e(i[1]):e(i),r.onicecandidate=o}else e(null)}):e(null)};return new Promise((function(n){r.onload=function(){r.status>=200&&r.status<300?n(r.response):t?o(n):n(null)},r.onerror=function(){o(n)},r.open("GET","https://".concat(e.apiHost,"/form/version/").concat(e.version,"/merchant/").concat(e.merchantId,"/session/").concat(e.session&&e.session.id?e.session.id:e.sessionId,"/ip/")),r.send()}))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.extractHost=void 0,t.extractHost=function(e){var t=function(e){return(e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]};if(window.apiUrl)return t(window.apiUrl);var r=n(21);if(""===e.trim())throw new Error('"filename" cannot be empty. Please provide a filename to your javascript file');for(var o,i=document.querySelectorAll("script[src]"),s=r("**/"+e+"*.js*"),a=0;a<i.length;a++){var c=i.item(a);if(c.src&&s.test(c.src)){o=c.src;break}}if(o)return t(o);throw new Error("None of the <script> tag [src] match with any of the accepted JS SDK: ".concat(e))}},function(e,t){e.exports=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");for(var n,r=String(e),o="",i=!!t&&!!t.extended,s=!!t&&!!t.globstar,a=!1,c=t&&"string"==typeof t.flags?t.flags:"",u=0,d=r.length;u<d;u++)switch(n=r[u]){case"/":case"$":case"^":case"+":case".":case"(":case")":case"=":case"!":case"|":o+="\\"+n;break;case"?":if(i){o+=".";break}case"[":case"]":if(i){o+=n;break}case"{":if(i){a=!0,o+="(";break}case"}":if(i){a=!1,o+=")";break}case",":if(a){o+="|";break}o+="\\"+n;break;case"*":for(var p=r[u-1],l=1;"*"===r[u+1];)l++,u++;var h=r[u+1];s?!(l>1)||"/"!==p&&void 0!==p||"/"!==h&&void 0!==h?o+="([^/]*)":(o+="((?:[^/]*(?:/|$))*)",u++):o+=".*";break;default:o+=n}return c&&~c.indexOf("g")||(o="^"+o+"$"),new RegExp(o,c)}}])}));
