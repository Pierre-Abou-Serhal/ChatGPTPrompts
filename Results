    public static class ImageOptimizeHelper
    {
        public static byte[] OptimizeImage(byte[] inputBytes)
        {
            using var image = Image.Load(inputBytes);

            // Remove metadata (can reduce size)
            image.Metadata.ExifProfile = null;

            // Optional resize (only if too large)
            const int maxWidth = 1920;
            const int maxHeight = 1920;

            if (image.Width > maxWidth || image.Height > maxHeight)
            {
                image.Mutate(x => x.Resize(new ResizeOptions
                {
                    Mode = ResizeMode.Max,
                    Size = new Size(maxWidth, maxHeight)
                }));
            }

            using var output = new MemoryStream();

            image.Save(output, new JpegEncoder
            {
                Quality = 75 // adjust 60-85 based on quality/size needs
            });

            return output.ToArray();
        }
    }
