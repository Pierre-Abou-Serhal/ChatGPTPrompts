Dears,

Find below the API flows of the Topup feature that will be implemented on Backbase

On continue, Backbase will be calling an API on OSB that will perform the following:
1-	Validate Limits on Alterna
2-	Create a session on MPGS servers (the session will be used to securely store all the information needed in order to make the topup)
3-	Update the created session with the data that was inputted from the user on Bacbbase
4-	API call “Verify” on MPGS that will be used for the following:
a.	Check if the card can be used
b.	Get the card issuer country code (to know if the transaction is domestic or international)
c.	Get the card brand : Mastercard or Visa
5-	API call “Forecast”  on T24 to forecast if the transaction will be successful or not (this API will use the inputted data from Backbase + the response of the Verify API). This API will return the commission that will be displayed on Backbase
6-	Generate TransactionId + OrderId
7-	Return to Backbase the following:
a.	Comission
b.	SessionId
c.	TransactionId
d.	OrderId

On Submit, Backbase will be calling an API on OSB that will perform the following:
1-	Using the SDK, Backbase will call begin the 3DS flow directly with MPGS using: MerchantId + SessionId + OrderId + TransactionId. During this process, Backbase will be sending the OSB API URL to MPGS so the OSB  API will be called automatically upon successfully submitting the OTP.
2-	Upon successfully completing the OTP flow, Backbase will be calling An API on OSB (using the sent URL) that will be performing the following:
a.	Call AFT Api on MPGS to get the pull from the card
b.	Call T24 to push the money to the card

Best Regards,
Pierre Abou Serhal.
